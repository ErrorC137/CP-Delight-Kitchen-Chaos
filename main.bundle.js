"use strict";(self.webpackChunkkitchen_chaos=self.webpackChunkkitchen_chaos||[]).push([[792],{214:(e,t,i)=>{var n=i(440),r=i.n(n);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function a(e){var t=function(e){if("object"!=s(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var i=t.call(e,"string");if("object"!=s(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==s(t)?t:t+""}function c(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a(n.key),n)}}function l(e,t,i){return t&&c(e.prototype,t),i&&c(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e,t){if(t&&("object"==s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}function y(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(y=function(){return!!e})()}var p=function(e){function t(){return o(this,t),e=this,n=[{key:"Boot"}],i=h(i=t),u(e,y()?Reflect.construct(i,n||[],h(e).constructor):i.apply(e,n));var e,i,n}return f(t,e),l(t,[{key:"preload",value:function(){var e=this;this.load.setBaseURL("./assets/"),this.createLoadingScreen(),this.load.on("loaderror",(function(t){console.error("Failed to load:",t.key),e.handleLoadError(t)})),this.loadAssets()}},{key:"createLoadingScreen",value:function(){var e=this.sys.game.config,t=e.width,i=e.height;this.add.text(t/2,i/2-40,"Loading Kitchen...",{font:"24px Arial",fill:"#ffffff"}).setOrigin(.5),this.add.rectangle(t/2,i/2+25,320,30,2236962,.8).setOrigin(.5);var n=this.add.rectangle(t/2-150,i/2+25,0,30,16777215,1).setOrigin(0,.5);this.load.on("progress",(function(e){n.width=300*e}))}},{key:"loadAssets",value:function(){try{this.load.spritesheet("player","sprites/kitchen/player.png",{frameWidth:32,frameHeight:32,endFrame:15}),this.load.image("kitchen_tiles","sprites/kitchen/kitchen_tiles.png"),this.load.image("counter","sprites/kitchen/counter.png"),this.load.image("fryer","sprites/kitchen/appliance_fryer.png"),this.load.image("ingredient_chicken","sprites/kitchen/ingredient_chicken.png"),this.load.image("timer_bg","sprites/ui/timer_background.png"),this.load.image("order_ticket","sprites/ui/order_ticket.png"),this.load.audio("sizzle","audio/sfx/sizzle.mp3"),this.load.audio("bell","audio/sfx/bell.mp3"),this.load.json("level1","config/level1.json")}catch(e){console.error("Critical asset error:",e),this.scene.start("Error",{message:"Failed to load game assets"})}}},{key:"create",value:function(){this.createAnimations(),this.scene.start("Kitchen"),this.scene.launch("HUD")}},{key:"createAnimations",value:function(){this.anims.create({key:"player_walk",frames:this.anims.generateFrameNumbers("player",{start:0,end:3}),frameRate:10,repeat:-1})}},{key:"handleLoadError",value:function(e){"image"===e.type&&(console.warn("Using fallback texture for ".concat(e.key)),this.textures.addBase64(e.key,"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="))}}])}(r().Scene);function g(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(g=function(){return!!e})()}var k=function(e){function t(e,i,n,r){var s,a,c,l;return o(this,t),a=this,l=[e,i,n,r],c=h(c=t),s=u(a,g()?Reflect.construct(c,l||[],h(a).constructor):c.apply(a,l)),e.add.existing(s),e.physics.add.existing(s),s.type=r,s.isCooking=!1,s.progress=0,s}return f(t,e),l(t,[{key:"canCook",value:function(e){return{fryer:["chicken","fish"],oven:["dough","meat"],mixer:["lettuce","tomato"]}[this.type].includes(e.texture.key)}},{key:"startCooking",value:function(e){var t=this;this.isCooking=!0,this.scene.time.addEvent({delay:5e3,callback:function(){return t.finishCooking(e)},callbackScope:this})}},{key:"finishCooking",value:function(e){this.isCooking=!1,this.scene.add.sprite(this.x,this.y,"".concat(e.texture.key,"_cooked")).setData("value",2*e.getData("value"))}}])}(r().Physics.Arcade.Sprite);function m(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(m=function(){return!!e})()}var v=function(e){function t(e,i,n){var r,s,a,c;return o(this,t),s=this,c=[e,i,n,"player"],a=h(a=t),r=u(s,m()?Reflect.construct(a,c||[],h(s).constructor):a.apply(s,c)),e.add.existing(r),e.physics.add.existing(r),r.carrying=null,r.setCollideWorldBounds(!0),r.createAnimations(),r.setSize(16,16).setOffset(8,16),r}return f(t,e),l(t,[{key:"createAnimations",value:function(){this.anims.create({key:"walk",frames:this.anims.generateFrameNumbers("player",{start:0,end:3}),frameRate:10,repeat:-1})}},{key:"pickupItem",value:function(e){this.carrying||(this.carrying=e,e.setVisible(!1),this.scene.physics.world.disableBody(e.body))}},{key:"dropItem",value:function(){this.carrying&&(this.carrying.setVisible(!0),this.carrying.body.enable=!0,this.carrying=null)}},{key:"update",value:function(e){this.body.setVelocity(0),e.left.isDown?(this.body.setVelocityX(-160),this.anims.play("walk",!0),this.flipX=!0):e.right.isDown&&(this.body.setVelocityX(160),this.anims.play("walk",!0),this.flipX=!1),e.up.isDown?(this.body.setVelocityY(-160),this.anims.play("walk",!0)):e.down.isDown&&(this.body.setVelocityY(160),this.anims.play("walk",!0)),0===this.body.velocity.x&&0===this.body.velocity.y&&this.anims.stop()}}])}(r().Physics.Arcade.Sprite);function b(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(b=function(){return!!e})()}var w=function(e){function t(){var e,i,n,r;return o(this,t),i=this,r=["Kitchen"],n=h(n=t),(e=u(i,b()?Reflect.construct(n,r||[],h(i).constructor):n.apply(i,r))).orders=[],e.currentOrder=null,e.disasters=["earthquake","fire","flood","mouseInvasion"],e}return f(t,e),l(t,[{key:"preload",value:function(){this.load.spritesheet("player","assets/sprites/kitchen/player.png",{frameWidth:32,frameHeight:32}),this.load.image("counter","assets/sprites/kitchen/counter.png"),this.load.image("fryer","assets/sprites/kitchen/appliance_fryer.png"),this.load.image("chicken","assets/sprites/kitchen/ingredient_chicken.png")}},{key:"create",value:function(){this.createKitchenLayout(),this.player=new v(this,100,100),this.setupCookingStations(),this.setupOrders(),this.setupDisasters(),this.time.addEvent({delay:3e4,callback:this.increaseDifficulty,callbackScope:this,loop:!0})}},{key:"createKitchenLayout",value:function(){this.add.tileSprite(0,0,2048,1536,"kitchen_tiles").setOrigin(0),this.counters=this.physics.add.staticGroup(),this.counters.create(300,400,"counter"),this.counters.create(500,400,"counter"),this.fryer=new k(this,700,400,"fryer")}},{key:"setupCookingStations",value:function(){this.physics.add.overlap(this.player,this.fryer,(function(e,t){e.carrying&&t.canCook(e.carrying)&&(t.startCooking(e.carrying),e.dropItem())}))}},{key:"setupOrders",value:function(){var e=this;this.orderTimer=this.time.addEvent({delay:45e3,callback:function(){e.generateOrder(),e.orderTimer.delay=r().Math.Between(3e4,45e3)},loop:!0})}},{key:"setupDisasters",value:function(){this.disasterTimer=this.time.addEvent({delay:6e4,callback:this.triggerDisaster,callbackScope:this,loop:!0})}},{key:"generateOrder",value:function(){var e=this,t={friedChicken:["chicken","oil"],salad:["lettuce","tomato"],burger:["patty","bun","lettuce"]},i=Object.keys(t),n=i[r().Math.Between(0,i.length-1)];this.orders.push({recipe:n,ingredients:t[n],timer:this.time.delayedCall(3e4,(function(){return e.failOrder()}))})}},{key:"triggerDisaster",value:function(){var e=this;switch(r().Math.RND.pick(this.disasters)){case"earthquake":this.cameras.main.shake(3e3,.02),this.time.addEvent({delay:100,callback:function(){e.children.each((function(e){e.body&&(e.body.velocity.y+=r().Math.Between(-50,50))}))},repeat:30});break;case"fire":var t=this.add.sprite(r().Math.Between(100,700),r().Math.Between(100,500),"fire");t.setScale(0).play("fire_anim"),this.tweens.add({targets:t,scale:1,duration:1e3})}}},{key:"increaseDifficulty",value:function(){this.timeBetweenOrders*=.9,this.disasterTimer.delay*=.85,this.orderTimer.delay=r().Math.Clamp(this.orderTimer.delay,15e3,45e3)}}])}(r().Scene);function A(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(A=function(){return!!e})()}var O=function(){function e(){return o(this,e),t=this,n=["HUD"],i=h(i=e),u(t,A()?Reflect.construct(i,n||[],h(t).constructor):i.apply(t,n));var t,i,n}return f(e,Phaser.Scene),l(e,[{key:"create",value:function(){this.orderText=this.add.text(20,20,"Current Order:",{fontSize:"24px",fill:"#FFF"}),this.timerText=this.add.text(20,50,"Time Remaining:",{fontSize:"24px",fill:"#FFF"}),this.registry.events.on("updateorder",this.updateOrder,this)}},{key:"updateOrder",value:function(e){this.orderText.setText("Order: ".concat(e.recipe,"\nIngredients: ").concat(e.ingredients.join(", ")))}}])}(),S={type:r().AUTO,parent:"game-container",width:2048,height:1536,pixelArt:!0,scene:[p,w,O],physics:{default:"arcade",arcade:{debug:!1,gravity:{y:0}}},scale:{mode:r().Scale.FIT,autoCenter:r().Scale.CENTER_BOTH}},C=new(r().Game)(S);C.events.once("ready",(function(){!function(e){try{var t=io("wss://your-game-server.com",{transports:["websocket"],secure:!0,reconnectionAttempts:5,timeout:1e4});e.registry.set("socket",t),t.on("connect",(function(){console.log("Socket connected"),e.scene.isActive("HUD")&&e.scene.get("HUD").handleConnection(!0)})),t.on("disconnect",(function(t){console.warn("Socket disconnected:",t),e.scene.isActive("HUD")&&e.scene.get("HUD").handleConnection(!1)})),t.on("connect_error",(function(t){console.error("Socket connection error:",t.message),e.scene.isActive("HUD")&&e.scene.get("HUD").showNetworkError(t.message)})),e.events.once("destroy",(function(){t.disconnect(),e.registry.remove("socket")}))}catch(t){console.error("Socket.io initialization failed:",t),e.scene.isActive("HUD")&&e.scene.get("HUD").showNetworkError("Connection features disabled")}}(C)}))}},e=>{e.O(0,[418],(()=>e(e.s=214))),e.O()}]);